<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="adminShopMapper">

	<resultMap type="Product" id="productResultSet"> 
		<id property="proCode" column="PRO_CODE"/>		
		<result property="cateCode" column="CATE_CODE" />
		<result property="proName" column="PRO_NAME" />
		<result property="price" column="PRICE" />	
		<result property="detailOri" column="DETAIL_ORI" />
		<result property="detailCha" column="DETAIL_CHA" />
		<result property="proAmount" column="PRO_AMOUNT" />
		<result property="proStatus" column="PRO_STATUS" />
		<result property="proContent" column="PRO_CONTENT" />
		
	</resultMap>
	
	
	<!-- 관리자 페이지 : 등록된 product 수  -->
	<select id = "selectListCount" resultType="_int">

	SELECT COUNT(*)
  	FROM PRODUCT
  	
    
  	</select>

	<!-- 관리자 페이지 : 등록된 제품들 전부 select해오기 -->
	<select id="selectList" parameterType="Product" resultMap="productResultSet">	
		 
	  SELECT *
	  FROM PRODUCT
	    
	</select>
	
	
	
	<!-- 관리자페이지: 제품 등록 -->	
	<insert id="insertProduct">	
		INSERT INTO PRODUCT VALUES(#{proCode}, #{cateCode}, #{proName}, #{price}, #{detailOri},#{detailCha}, DEFAULT, DEFAULT, #{proContent})
  
  	</insert>
  	
  	
  	
  	
  	<!-- 관리자페이지: 제품 디테일페이지 조회 -->	
  	<select id = "selectProduct" parameterType="Product" resultMap="productResultSet">

	  SELECT *
	  FROM PRODUCT 	  	  
	  WHERE PRO_CODE=#{proCode}
    
 	</select>
  	
  	
  	<!-- 관리자페이지: 제품 삭제 -->	
  	<update id="deleteProduct">
  
  		UPDATE PRODUCT SET PRO_STATUS='N' WHERE PRO_CODE=#{proCode}
    
  	</update>
  	
  	
  	<!-- 관리자페이지 : 제품 수정 -->
  	
  	<update id="updateProduct" parameterType="Product">
  
  
	  UPDATE PRODUCT
	  SET CATE_CODE=#{cateCode}, PRO_NAME=#{proName}, PRICE=#{price}, DETAIL_ORI=#{detailOri}, DETAIL_CHA=#{detailCha}, PRO_CONTENT=#{proContent}
	  WHERE PRO_CODE=#{proCode}
	  
	  
	</update>



	<!-- 사은품 리절트맵 -->
	
	<resultMap type="Freebie" id="freebieResultSet"> 
		<id property="freeNo" column="FREE_NO"/>		
		<result property="freeName" column="FREE_NAME" />
		<result property="originName" column="ORIGIN_NAME" />
		<result property="changeName" column="CHANGE_NAME" />	
		<result property="freePoint" column="FREE_POINT" />
		<result property="freeAmount" column="FREE_AMOUNT" />		
		
	</resultMap>
	
	
	<!-- 관리자 페이지 : 등록된 사은품 수  -->
	<select id = "freebieListCount" resultType="_int">

	SELECT COUNT(*)
  	FROM FREEBIE
  	
    
  	</select>

	<!-- 관리자 페이지 : 등록된 사은품 전부 select해오기 -->
	<select id="selectFreebieList" parameterType="Freebie" resultMap="freebieResultSet">	
		 
	  SELECT *
	  FROM FREEBIE
	    
	</select>


	<!-- 관리자페이지: 제품 등록 -->	
	<insert id="insertFreebie">	
		INSERT INTO FREEBIE VALUES(SEQ_FREE_NO.NEXTVAL, #{freeName}, #{originName}, #{changeName}, #{freePoint},#{freeAmount})
  
  	</insert>
  	
  	
  	
  	<!-- 관리자페이지: 사은품 디테일페이지 조회 -->	
  	<select id = "selectFreebie" parameterType="Freebie" resultMap="freebieResultSet">

	  SELECT *
	  FROM FREEBIE 	  	  
	  WHERE FREE_NO=#{freeNo}
    
 	</select>


  	<!-- 관리자페이지: 사은품 삭제 -->	
  	<delete id="deleteFreebie">  
  		
  		DELETE FROM FREEBIE WHERE FREE_NO=#{freeNo}
    
  	</delete>
  	
  	
  	<!-- 관리자페이지 : 사은품 수정 -->  	
  	<update id="updateFreebie" parameterType="Freebie">  
  
	  UPDATE FREEBIE
	  SET FREE_NAME=#{freeName}, ORIGIN_NAME=#{originName}, CHANGE_NAME=#{changeName}, FREE_POINT=#{freePoint}, FREE_AMOUNT=#{freeAmount}
	  WHERE FREE_NO=#{freeNo}	  
	  
	</update>
	<!-- 사은품 리절트맵 -->
	
	<resultMap type="ProReview" id="ProReviewResultSet"> 
		<id property="reviewNo" column="REVIEW_NO"/>		
		<result property="reviewWriter" column="REVIEW_WRITER" />
		<result property="proCode" column="PRO_CODE" />
		<result property="reviewStar" column="REVIEW_STAR" />	
		<result property="reviewTitle" column="REVIEW_TITLE" />
		<result property="reviewContent" column="REVIEW_CONTENT" />
		<result property="originName" column="ORIGIN_NAME" />
		<result property="changeName" column="CHANGE_NAME" />
		<result property="reviewDate" column="REVIEW_DATE" />
		<result property="reviewCount" column="REVIEW_COUNT" />		
		
	</resultMap>
	
	
	<!-- 관리자 페이지 : 등록된 사은품 수  -->
	<select id = "reviewListCount" resultType="_int">

	SELECT COUNT(*)
  	FROM PRO_REVIEW
  	
    
  	</select>

	<!-- 관리자 페이지 : 등록된 사은품 전부 select해오기 -->
	<select id="selectReviewList" parameterType="ProReview" resultMap="ProReviewResultSet">	
		 
	  SELECT *
	  FROM PRO_REVIEW
	    
	</select>
	
	
	
	
	
</mapper>
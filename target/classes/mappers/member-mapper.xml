<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="memberMapper">
	<resultMap type="Member" id="memberResultSet"> 
		<id property="userNo" column="USER_NO"/>		
		<result property="userId" column="USER_ID" />
		<result property="userPwd" column="USER_PWD" />
		<result property="userName" column="USER_NAME" />	
		<result property="birth" column="BIRTH" />
		<result property="gender" column="AGE" />
		<result property="address" column="ADDRESS" />
		<result property="addressDetail" column="ADDRESS_DETAIL" />
		<result property="tel" column="TEL" />
		<result property="phone" column="PHONE" />
		<result property="email" column="EMAIL" />	
		<result property="preference" column="PREFERENCE" />	
		<result property="enrollDate" column="ENROLL_DATE" />	
		<result property="delDate" column="DEL_DATE" />	
		<result property="status" column="STATUS" />	
	</resultMap>

	<!-- 암호화 하기 전 로그인  -->
	<select id="loginMember" parameterType="Member" resultMap="memberResultSet">	
		 
		SELECT * 
		FROM MEMBER
		WHERE USER_ID=#{userId} 
			AND USER_PWD=#{userPwd} 
			AND STATUS='Y'		
	</select>
	
	<!-- 아이디 중복체크 -->
	<select id ="idCheck" parameterType="string" resultType="_int">
		select count(*)
		from member
		where user_id=#{id}		
	</select>
	
	<!-- 회원가입  -->
	<insert id="insertMember" parameterType="Member">		
		INSERT INTO MEMBER VALUES
		(SEQ_USER_NO.NEXTVAL, #{userId}, #{userPwd}, #{userName}, #{birth}, #{gender}, #{address}, #{addressDetail}, #{tel}, #{phone}, #{email}, #{preference}, SYSDATE, NULL, 'Y')		
	</insert>
</mapper>